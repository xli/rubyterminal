#!/usr/bin/env ruby
begin
  require 'terminal'
rescue LoadError
  require 'rubygems'
  require 'terminal'
end

Terminal.start do
  puts "Terminal started at #{Dir.pwd}"
  Terminal.terminal_process = true
  ARGV.each do |env_file|
    puts "require #{File.expand_path(env_file).inspect}"
    require File.expand_path(env_file)
  end
  Terminal.terminal_process = false
  puts "Environment loaded"

  while(true) do
    sleep(0.1)
    Terminal.process
  end
end
